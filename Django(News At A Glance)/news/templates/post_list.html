<!doctype html>
{% load staticfiles %}
<html>
	<head>
		<meta charset="utf-8">
		<!-- Latest compiled and minified CSS -->
		
	<!-- bootstrap套件------------------------------------------------------------------------ -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"> 
	<!-- bootstrap套件------------------------------------------------------------------------ -->
		
		<!-- Optional theme -->
		<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"> -->
		
	<!-- jQuery套件------------------------------------------------------------------------ -->
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>
	<!-- jQuery套件------------------------------------------------------------------------ -->
		
		<!-- for Clustering -->
		
	<!-- template套件------------------------------------------------------------------------ -->
		<link rel="stylesheet" href="{% static 'css/skel.css' %}" type="text/css">
		<link rel="stylesheet" href="{% static 'css/style.css' %}" type="text/css">
		<link rel="stylesheet" href="{% static 'css/style-xlarge.css' %}" type="text/css">
	<!-- template套件------------------------------------------------------------------------ -->
		
		<!-- For TextMining_Emotional -->
		
	<!-- 繪製分析圖套件------------------------------------------------------------------------ -->
		<script src="http://d3js.org/d3.v3.min.js"></script>
		<script src="http://dimplejs.org/dist/dimple.v2.1.6.min.js"></script>
		<!-- <script src="d3.v3.4.8.js"></script> -->
		<!-- <script src="dimple.v2.2.0.js"></script> -->
	<!-- 繪製分析圖套件------------------------------------------------------------------------ -->
		
		<style> 
		<!-- h3{ float:left} ,a{ float:left},div{ float:left},p{ float:left} ,span{ float:left} ,button{ float:left} -->
		</style> 
		
	<!-- 按鍵滑動套件------------------------------------------------------------------------ -->
		<script type="text/javascript" src="{% static 'js/jquery.easing.1.3.js' %}"></script>
		<script type="text/javascript" src="{% static 'js/jquery-1.6.min.js' %}"></script>
	<!-- 按鍵滑動套件------------------------------------------------------------------------ -->
		
	<!-- 輪播圖片套件------------------------------------------------------------------------ -->
		<script type="text/javascript" src="{% static 'js/jquery.cycle.lite.js' %}"></script>
	<!-- 輪播圖片套件------------------------------------------------------------------------ -->
	
	<!-- For 情緒詞統計 -->
		<meta name="viewport" content="initial-scale=1.0; maximum-scale=1.0; width=device-width;">
		<link rel="stylesheet" href="{% static 'css/style_sentimental.css' %}">
		
	<!-- 自寫套件,順序盡量放在後面,因為要引用前面套件設定好的code------------------------ -->
		<script type="text/javascript" src="{% static 'js/JQJQ.js' %}"></script>
		<link rel="stylesheet" href="{% static 'css/JQJQ.css' %}">
	<!-- 自寫套件------------------------------------------------------------------------ -->
		
		<title>News  At  A  Glance</title>
	</head>

	<body >
	<!-- 置頂視窗------------------------------------------------------------------------ -->
		<header id="header" class="skel-layers-fixed">

			<form > 
				<nav id="nav">
					<h3>搜尋新聞</h3>		
					<!-- <svg width='36px' height='36px' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-default"><rect x="0" y="0" width="100" height="100" fill="none" class="bk"></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#00b2ff' transform='rotate(0 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#00b2ff' transform='rotate(30 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.08333333333333333s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#00b2ff' transform='rotate(60 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.16666666666666666s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#00b2ff' transform='rotate(90 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.25s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#00b2ff' transform='rotate(120 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.3333333333333333s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#00b2ff' transform='rotate(150 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.4166666666666667s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#00b2ff' transform='rotate(180 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.5s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#00b2ff' transform='rotate(210 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.5833333333333334s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#00b2ff' transform='rotate(240 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.6666666666666666s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#00b2ff' transform='rotate(270 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.75s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#00b2ff' transform='rotate(300 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.8333333333333334s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#00b2ff' transform='rotate(330 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.9166666666666666s' repeatCount='indefinite'/></rect></svg>	 -->
					<!-- 搜尋Button -->
					<div class="col-lg-7">
						<div class="input-group">
						  <input type="text" class="form-control" placeholder="Search for..." name="name">
						  <span class="input-group-btn">
							<button class="btn btn-default" type="submit">Search!</button>
						  </span>
						<div>搜尋關鍵字：{{sentence}} ------- 搜尋結果：{{count}}篇新聞</div>  
						
						</div><!-- /input-group -->				
					</div><!-- /.col-lg-6 -->		
					
					
					<div> <!-- 按鈕 -->
						<div class="guideconnect"><a href="#" id="Top" style="text-decoration:none;" >置頂</a></div>	
						<div class="guideconnect"><a href="#" id="One" style="text-decoration:none;"> 數量分析圖 </a></div>
						<div class="guideconnect"><a href="#" id="Two" style="text-decoration:none;"> 情緒分析圖 </a></div>
						<div class="guideconnect"><a href="#" id="Third" style="text-decoration:none;"> 情緒詞分析表 </a></div>
						<div class="guideconnect"><a href="timeliner/group1/{{sentence}}" style="text-decoration:none; " target="_blank">懶人包</a></div>
					</div> <!-- 按鈕 -->
				</nav>
			</form>
		
		</header >
	<!-- 置頂視窗------------------------------------------------------------------------ -->
		
		<a name = "top"><svg height = "75"></a> <!-- 插入一個svg圖來控制頂層留白 -->
		
	<!-- 輪播圖片 ------------------------------------------------------------------------>
		<div id = "slider">
			<div class="show1"></div>
			<div class="show2"></div>
			<div class="show3"></div>
			<div class="show4"></div>
		</div>
	<!-- 輪播圖片 ------------------------------------------------------------------------>
		<br>
	<!-- 大標 -------------------------------------------------------------------------->
		<div id="outdiv">
			<div id="micmark">	
				<img src="{% static 'images/mic.ico' %}">
			</div>
			<div id="brandname">News  At  A  Glance</div>
		</div>
	<!-- 大標 -------------------------------------------------------------------------->
		
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
	<div class = "P1">數量分析圖</div>
		<br>
		<br>
		<br>
	<!-- 數量分析圖開始 -->
		<div id="chartContainer">
			<script src="d3.v3.4.8.js"></script>
			<script src="dimple.v2.2.0.js"></script>
			<script type="text/javascript">
		  
			var svg = dimple.newSvg("#chartContainer", 1800, 600);
			var linedata = {{trends | safe}};

			
			var chart = new dimple.chart(svg, linedata);
			chart.setBounds(75, 16, 1700, 480);
			var x = chart.addCategoryAxis("x", ["date","title"]);
			x.addOrderRule("date");
			chart.addMeasureAxis("y", "daycount");
			
			var s = chart.addSeries("Channel", dimple.plot.line);
			//chart.setStoryboard("daycount") //由小到大凸顯每個bart
			
			s.lineWeight = 3;
			s.lineMarkers = true; //資料點位顯示
			

			//s.interpolation = "cardinal";   //曲線or圓弧
			chart.addLegend(80, 10, 500, 20, "left");
			chart.draw();
			</script>
		</div>
	<!-- 數量分析圖結束 -->
		<br>
		<br>
		<br>
	<div class = "P1">情緒分析圖</div>
		<br>
		<br>
		<br>
	<!-- 以下是情緒分析圖 -->
		<div id="chartContainer2">  
			<script src="d3.v3.4.8.js"></script>
			<script src="dimple.v2.2.0.js"></script>
			<script type="text/javascript">
			var svg = dimple.newSvg("#chartContainer2", 1800, 600); //畫布的長寬
			
		
			<!-- 把viws.py 傳過來的json變數拿來用 -->
			var data = {{pos_neg_json | safe}};   //加個 | safe可以讓傳過來的變數保持原本的型態跟格式
			//alert(typeof(data))
			//alert(data)	
			
			// Create and Position a Chart
			var chart = new dimple.chart(svg, data);
			chart.setBounds(75, 16, 1700, 480);   //圖形的長寬(第三個參數)
			
			//x軸設定
			var x = chart.addCategoryAxis("x", ["Date","Title"]);
			x.addOrderRule("Date");
			
			chart.addMeasureAxis("y", "Hot");  //給y軸名稱
			//chart.addCategoryAxis("x", "Data");
			
			<!-- 是否呈現顏色 -->
			// Min price will be green, middle price yellow and max red
			//chart.addColorAxis("Price", ["green", "yellow", "red"]);
			
			<!-- chart.addSeries(null, dimple.plot.bar); -->
			var a = chart.addSeries("Channel", dimple.plot.line);   
			
			//var b = chart.addSeries("Channel", dimple.plot.bubble);  //再畫一條有圓點再轉軸的圖
			//var s = chart.addSeries("null", dimple.plot.line);       //總和曲線

			<!-- 軸線設定 -->
			a.lineWeight = 3;       //調整軸線的粗度
			a.lineMarkers = true;   //轉折處是否出現圓點
			
			<!-- 線條圓弧 or 折線 (要直線就直接註解掉就好) -->
			//a.interpolation = "cardinal";
			//s.interpolation = "cardinal";
			
			//未知
			chart.addLegend(80, 10, 500, 20, "left");
			
			//畫線
			chart.draw();
			
			</script>
		</div>  
	<!-- 情緒分析圖結束 -->
		<br>
		<br>
		<br>
		<div class = "P1">情緒詞分析表</div>		
		<br>
		<br>
		<br>
	<!-- 情緒詞統計圖開始 -->

		<div id="emontional_count">
			<div id="pos_table">
			<p>正向詞</p>
				<div style="overflow-x: auto; overflow-y: auto; height: 300px; width:300px;" >

					<table class="table-fill">
					<thead>
						<tr>
							<th class="text-title">Word</th>
							<th class="text-title">Count</th>
						</tr>
					</thead>
					
					<tbody class="table-hover">
					{% for post in all_pos_word %}   
						<tr>
							<td class="text-left">{{post.pos}}</td>
							<td class="text-left">{{post.count}}</td>
						</tr>
					{% endfor %}

					</tbody>
					</table>
				</div>
			</div>
			<!-- ------------------------------------------------------------------------------- -->
			<!-- ------------------------------------------------------------------------------- -->
<!-- 		<div>
				<h3>負向詞</h3>
			</div> -->
			<div id="neg_table">
			<p>負向詞</p>
				<div style="overflow-x: auto; overflow-y: auto; height: 300px; width:300px;" >
					<table class="table-fill" >
					<thead>
						<tr>
							<th class="text-title">Word</th>
							<th class="text-title">Count</th>
						</tr>
					</thead>
					
					<tbody class="table-hover">
					{% for post in all_neg_word %}   
						<tr>
							<td class="text-left">{{post.neg}}</td>
							<td class="text-left">{{post.count}}</td>
						</tr>
					{% endfor %}

					</tbody>
					</table>
				</div>
			</div>
		</div>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>

	<!-- 情緒詞統計圖開始結束 -->
	
	<!-- 置底-------------------------------------------------------------------------->
		<footer id="footer">
			<div class="container">			
				<ul class="copyright">
					<li>Copyright &copy; ZB105</li>						
				</ul>
			</div>
		</footer>
	<!-- 置底-------------------------------------------------------------------------->
		
	</body>
<html>